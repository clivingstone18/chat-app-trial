{"ast":null,"code":"import _toConsumableArray from\"/Users/clairelivingstone/Desktop/chat-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/clairelivingstone/Desktop/chat-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import queryString from\"query-string\";import{io}from\"socket.io-client\";import{ChatMessage}from\"./ChatMessage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ENDPOINT=\"http://127.0.0.1:5000\";var socket;export var Chat=function Chat(_ref){var location=_ref.location;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),room=_useState4[0],setRoom=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),messages=_useState6[0],setMessages=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),currMessage=_useState8[0],setCurrMessage=_useState8[1];useEffect(function(){var _queryString$parse=queryString.parse(location.search),name=_queryString$parse.name,room=_queryString$parse.room;setName(name);setRoom(room);socket=io(ENDPOINT);socket.emit('join',{name:name,room:room});return function(){socket.emit('disconnect');socket.off();};},[ENDPOINT,location.search]);useEffect(function(){socket.on('message',function(text){console.log(text);setMessages([text].concat(_toConsumableArray(messages)));});},[messages]);var sendMessage=function sendMessage(e){e.preventDefault();if(currMessage){console.log(currMessage);socket.emit('message',currMessage,function(){return setCurrMessage('');});}else{/* don't do anything */}};return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",background:\"#fadadd\",justifyContent:\"space-around\",flexDirection:\"column\",alignItems:\"center\",height:\"1200px\",width:\"1200px\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Trial Chat App\"}),/*#__PURE__*/_jsxs(\"div\",{style:{height:\"1000px\",width:\"1000px\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:\"10px\",background:\"white\",height:\"800px\",width:\"800px\",padding:\"20px\",display:\"flex\",flexDirection:\"column-reverse\"},children:messages.map(function(val,idx){return/*#__PURE__*/_jsx(ChatMessage,{message:val,sentByMe:name===val.user},idx);})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\"},children:[/*#__PURE__*/_jsx(\"textarea\",{value:currMessage,onChange:function onChange(e){return setCurrMessage(e.target.value);},placeholder:\"Type a message!\",type:\"textarea\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,children:\"Send\"})]})]})]})});};","map":{"version":3,"sources":["/Users/clairelivingstone/Desktop/chat-app/client/src/components/Chat.js"],"names":["React","useState","useEffect","queryString","io","ChatMessage","ENDPOINT","socket","Chat","location","name","setName","room","setRoom","messages","setMessages","currMessage","setCurrMessage","parse","search","emit","off","on","text","console","log","sendMessage","e","preventDefault","display","background","justifyContent","flexDirection","alignItems","height","width","marginBottom","padding","map","val","idx","user","target","value"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport queryString from \"query-string\";\nimport { io } from \"socket.io-client\";\nimport {ChatMessage} from \"./ChatMessage\"\nconst ENDPOINT = \"http://127.0.0.1:5000\";\n\nlet socket;\n\nexport const Chat = ({location}) => {\n  const [name, setName] = useState(\"\");\n  const [room, setRoom] = useState(\"\");\n  const [messages, setMessages] = useState([]);\n  const [currMessage, setCurrMessage] = useState('');\n\n  useEffect(() => {\n    const {name, room} = queryString.parse(location.search);\n    setName(name);\n    setRoom(room);\n    socket = io(ENDPOINT);\n\n    socket.emit('join', {name, room});\n  \n  return () => {\n    socket.emit('disconnect'); \n    socket.off();\n  }\n}\n  , [ENDPOINT, location.search])\n\n  useEffect(()=> {\n    socket.on('message', text => {\n      console.log(text);\n      setMessages([text, ...messages]);\n    })\n  }, [messages])\n\n  const sendMessage = (e) => {\n    e.preventDefault();\n    if (currMessage) {\n      console.log(currMessage);\n      socket.emit('message', currMessage, ()=>setCurrMessage(''))\n    }\n    else {\n      /* don't do anything */\n    }\n  }\n\n  return (\n    <div className=\"App\">\n    <div style={{display: \"flex\", \n    background: \"#fadadd\", justifyContent:\"space-around\",\n    flexDirection: \"column\", alignItems: \"center\",\n    height: \"1200px\", width: \"1200px\"}}>\n      <h1>Trial Chat App</h1>\n      <div style={{height: \"1000px\", width: \"1000px\",\n    display: \"flex\",  flexDirection: \"column\", alignItems: \"center\"}}>\n        \n        <div style={{marginBottom: \"10px\", background: \"white\",height: \"800px\", width: \"800px\",\n      padding: \"20px\", display: \"flex\", flexDirection: \"column-reverse\"}}>\n          {messages.map((val, idx) => <ChatMessage key={idx} message={val} sentByMe={name === val.user}/>)}\n        </div>\n\n        <div style={{display: \"flex\"}}>          \n        <textarea value={currMessage} onChange={e=>setCurrMessage(e.target.value)} placeholder=\"Type a message!\" type=\"textarea\"></textarea>\n        <button onClick={sendMessage}>Send</button>\n\n        </div>\n\n\n      </div>\n    </div>\n  </div>\n\n  )\n}"]},"metadata":{},"sourceType":"module"}